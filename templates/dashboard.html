{% extends 'base.html' %}
{% block content %}

<div class="card fade-in">
    <h2><i class="fa-solid fa-chart-line"></i> Expense Dashboard</h2>
    <h3 style="margin-top:10px;">Total Spending: ₹ {{ total }}</h3>
</div>

<!-- Charts -->
<div class="card fade-in" style="margin-top:20px;">
    <h3><i class="fa-solid fa-chart-pie"></i> Expense Analytics</h3>

    <div style="display:flex; gap:30px; flex-wrap:wrap; justify-content:center; margin-top:20px;">
        <img src="{{ url_for('static', filename='charts/pie.png') }}" width="280">
        <img src="{{ url_for('static', filename='charts/hist.png') }}" width="280">
    </div>
</div>

<!-- Table -->
<div class="card fade-in" style="margin-top:20px;">
    <h3><i class="fa-solid fa-table"></i> Recent Expenses</h3>

    <table style="width:100%; margin-top:15px; border-collapse: collapse;">
        <tr style="background:#ffd369; color:black;">
            <th>Date</th>
            <th>Category</th>
            <th>Note</th>
            <th>Amount</th>
            <th>Action</th>
        </tr>

        {% for e in expenses %}
        <tr style="text-align:center; border-bottom:1px solid #eee;">
            <td>{{ e.expense_date }}</td>
            <td>{{ e.category }}</td>
            <td>{{ e.note }}</td>
            <td>₹ {{ e.amount }}</td>
            <td style="display:flex; gap:8px; justify-content:center;">

                <a href="{{ url_for('edit_expense', id=e.id) }}">
                    <button style="background:#4ecca3;">
                        <i class="fa-solid fa-pen"></i>
                    </button>
                </a>

                <form action="{{ url_for('delete_expense', id=e.id) }}" method="POST">
                    <button style="background:#ff4d4d;">
                        <i class="fa-solid fa-trash"></i>
                    </button>
                </form>

            </td>
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock %}